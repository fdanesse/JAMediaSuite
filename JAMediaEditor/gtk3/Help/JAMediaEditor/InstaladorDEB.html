<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Instalador debian (.deb)</title>
    <style type="text/css">
        @page { margin-left: 1cm; margin-right: 1cm }
        p { margin-bottom: 0.25cm; color: #000000; line-height: 120% }
        a:link { so-language: zxx }
    </style>
</head>

<body lang="es-UY">

    <p align="left">
        <u><font size="4" color="#000099" style="font-size: 14pt">
            <b>Sistema de gestión de paquetes:</b>
        </u></font>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        <font size="3" style="font-size: 12pt">
        Los paquetes .deb son instaladores gestionados por el Sistema de gestión de paquetes de debian (apt = Advanced Packaging Tool).<br/>
        Un sistema de gestión de paquetes, es una colección de herramientas que sirven para automatizar el proceso de instalación, actualización, configuración y eliminación de paquetes de software.<br/>
        <br/>
        Estos paquetes incluyen otra información importante, además del software en sí, como pueden ser el nombre completo, una descripción de su funcionalidad, el número de versión, el distribuidor del software, la suma de verificación y una lista de otros paquetes requeridos para el correcto funcionamiento del software.<br/>
        Esta metainformación se introduce normalmente en una base de datos de paquetes local.<br/>
        <br/>
        Los sistemas de gestión de paquetes tienen la tarea de organizar todos los paquetes instalados en el sistema y se encargan de mantener su usabilidad.<br/>
        </font>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        <font size="3" style="font-size: 12pt">
        <b>Esto se consigue combinando las siguientes técnicas:</b></font>
        <ul style="margin-left: 1.25cm; margin-top: 0cm">
            <li/>Comprobación de la suma de verificación para evitar que haya diferencias entre la versión local de un paquete y la versión oficial.
            <li/>Comprobación de la firma digital.
            <li/>Instalación, actualización y eliminación simple de paquetes.
            <li/>Resolución de dependencias para garantizar que el software funcione correctamente.
            <li/>Búsqueda de actualizaciones para proveer la última versión de un paquete.
            <li/>Agrupamiento de paquetes según su función para evitar la confusión al instalarlos o mantenerlos.
        </ul>
    </p>

    <p align="left" style="margin-left: 1.25cm; margin-bottom: 0cm">
        <font size="3" style="font-size: 12pt">
        Muchos de los sistemas de gestión de paquetes ampliamente utilizados, utilizan backends simples para instalar los paquetes. Por ejemplo, YUM utiliza RPM y APT utiliza dpkg.
        </font>
    </p>

    <p align="left" style="margin-left: 1.25cm; margin-bottom: 0cm">
        <font size="3" style="font-size: 12pt">
        <b>Sistemas basados en paquetes binarios:</b></font>
    </p>

    <p align="left" style="margin-left: 2.0cm; margin-bottom: 0cm">
        <font size="3" style="font-size: 12pt">
        dpkg, usado originalmente por Debian y ahora también por otros sistemas, usa el formato .deb y fue el primero en poseer una herramienta de resolución de dependencias ampliamente conocida, APT.
    </p>

    <br/>

    <p align="left">
        <u><font size="4" color="#000099" style="font-size: 14pt">
            <b>Advanced Packaging Tool (apt):</b>
        </u></font>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        <font size="3" style="font-size: 12pt">
        Es un sistema de gestión de paquetes creado por el proyecto Debian.<br/>
        APT simplifica en gran medida la instalación y eliminación de programas en los sistemas GNU/Linux.<br/>
        <br/>
        No existe un programa apt en sí mismo, APT es una biblioteca de funciones C++ que es empleada por varios programas de línea de comandos para distribuir paquetes. En especial, apt-get y apt-cache.<br/>
        <br/>
        Existen también programas que proporcionan un frontend para APT, generalmente basados en apt-get, como aptitude con una interfaz de texto ncurses, Synaptic con una interfaz gráfica GTK+, o Adept con una interfaz gráfica Qt.<br/>
        <br/>
        Existe un repositorio central con más de 25.000 paquetes apt utilizados por apt-get y programas derivados para descargar e instalar aplicaciones directamente desde Internet, conocida como una de las mejores cualidades de Debian.<br/>
        <br/>
        APT fue rápidamente utilizado para funcionar con paquetes .deb, en los sistemas Debian y distribuciones derivadas, pero desde entonces ha sido modificado para trabajar con paquetes RPM, con la herramienta apt-rpm, y para funcionar en otros sistemas operativos, como Mac OS X y OpenSolaris.
    </p>

    <br/>

    <p align="left">
        <u><font size="4" color="#000099" style="font-size: 14pt">
            <b>Como crear un paquete .deb:</b>
        </u></font>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        <font size="3" style="font-size: 12pt">
        <b>Un paquete debian, utiliza:</b></font>
        <ul style="margin-left: 1.25cm; margin-top: 0cm">
            <li/>Un archivo de control para manejar la información del paquete.
            <li/>Una estructura de directorios con el software a distribuir.
        </ul>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        <font size="3" style="font-size: 12pt">
        <b>Hagamos un ejemplo práctico:</b></font>
    </p>

    <p align="left" style="margin-left: 2.0cm">
        <font size="3" style="font-size: 12pt">
        En un directorio llamado &quot;Proyecto&quot;, creamos la estructura de directorios de instalación del software.<br/>
        <br/>
        Esta estructura debe replicar la estructura final de instalación de nuestro software, de modo que creamos dos directorios, (bin y share).<br/>
        <br/>
        Dentro del directorio share, copiamos el directorio que contiene nuestro software a instalar.<br/>
        <br/>
        Dentro del directorio bin, escribimos el lanzador de nuestra aplicación, <i>(ver Ayuda sobre <a href="Instaladores.html">&quot;Instaladores en General&quot;</a>)</i>.<br/>
        <br/>
        Si deseas un lanzador en algún menú del entorno gráfico, dentro de share creas el directorio applications y en él escribes tu archivo .desktop, <i>(ver Ayuda sobre <a href="Instaladores.html">&quot;Instaladores en General&quot;</a>)</i>.<br/>
        <br/>
        Además, en el directorio &quot;Proyecto&quot;, debes crear el directorio DEBIAN y dentro escribir el archivo control.<br/>
    </p>

    <br/>

    <p align="left" style="margin-left: 1.25cm">
        <b>La estructura final de directorios y archivos para el caso de JAMediaEditor, será:</b>
    </p>
        <p align="left" style="margin-left: 2.5cm; margin-top: 0cm"><font color="#000099">
            JAMediaEditor</font></p>
                <p align="left" style="margin-left: 3.75cm; margin-top: 0cm"><font color="#000099">
                DEBIAN</font></p>
                    <p align="left" style="margin-left: 5cm; margin-top: 0cm"><font color="#000099">
                    control</font></p>
                <p align="left" style="margin-left: 3.75cm; margin-top: 0cm"><font color="#000099">
                bin</font></p>
                    <p align="left" style="margin-left: 5cm; margin-top: 0cm"><font color="#000099">
                    lanzador</font></p>
                <p align="left" style="margin-left: 3.75cm; margin-top: 0cm"><font color="#000099">
                share</font></p>
                <p align="left" style="margin-left: 5cm; margin-top: 0cm"><font color="#000099">
                    applications</font></p>
                        <p align="left" style="margin-left: 6.25cm; margin-top: 0cm"><font color="#000099">
                        jamediaeditor.desktop</font></p>
                <p align="left" style="margin-left: 5cm; margin-top: 0cm"><font color="#000099">
                    JAMediaEditor</font></p>
                    <p align="left" style="margin-left: 6.25cm; margin-top: 0cm"><font color="#000099">
                        Todo el código de JAMediaEditor</font></p>
    <br/>

    <p align="left" style="margin-left: 1.25cm">
        <b>Ejemplo de archivo control:</b>
    </p>
        <p align="justify" style="margin-left: 2.5cm"><font color="#990000">
        Package: bichos<br/>
        Source: Bichos<br/>
        Version: 1<br/>
        Section: Game<br/>
        Priority: optional<br/>
        Architecture: all<br/>
        Maintainer: flavio danesse &lt;fdanesse@gmail.com&gt;<br/>
        Homepage: https://sites.google.com/site/sugaractivities/cucarasims<br/>
        Depends:<br/>
        Description: Este campo es obligatorio<br/>
        Aquí debes poner la descripción larga y debe contener un espacio vacío al comienzo
        </font></p>

    <p align="justify" style="margin-left: 1.25cm">
        Luego de tener toda la estructura de directorios y archivos lista, debes asegurarte de dar los permisos de lectura y ejecución adecuados a cada archivo y directorio.<br/>
        En particular: todos los ejecutables deben tener permisos de ejecución, esto incluye el lanzador y el archivo .desktop.<br/>
        Cuando esté todo listo, desde la terminal, <b>construimos el paquete .deb utilizando dpkg:</b>
    </p>

        <p align="left" style="margin-left: 2.5cm"> <font color="#990000">
            dpkg -b ./deb /directorio_construido_anteriormente /directorio_destino_del_paquete_deb/nombre_paquete.deb
        </font></p>

    <p align="justify" style="margin-left: 1.25cm">
        El archivo .deb resultante está listo para ser distribuido o instalado con el gestor de paquetes. (Recuerda darle permisos de ejecución). Bastará con que el usuario haga doble click sobre él, para que el gestor de paquetes lo abra y pueda comenzar su instalación.
    </p>

    <br/>

    <p align="left" style="margin-left: 1.25cm">
        <b>Luego, para desinstalar la aplicación, el usuario debe hacer:</b>
    </p>

    <p align="left" style="margin-left: 2.5cm"><font color="#990000">
        sudo apt-get remove nombre_de_la_aplicación</font>
    </p>

    <br/>

    <p align="left">
        <u><font size="4" color="#000099" style="font-size: 14pt">
            <b>Sobre JAMediaEditor:</b>
        </u></font>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        <font size="3" style="font-size: 12pt">
        Los paquetes .deb son generalmente muchísimo más complejos que el ejemplo explicado aquí, sin embargo, basta con lo demostrado acá para construir un instalador .deb funcional.<br/>
        A medida que aprendas más sobre instaladores .deb, podrás ir mejorando el archivo control e ir incorporando otros archivos que suelen utilizarse.<br/>
        <br/>
        JAMediaEditor sólo pretende automatizar el proceso para hacer esto fácil y tu puedas aprender sobre ello.<br/>
        <br/>
        Los instaladores .deb construidos con JAMediaEditor, si bien son muy simples, deben funcionar sin que hagas cambio alguno.<br/>
        Si alguno de ellos falla, asegúrate que no se debe a cambios realizados por tí en alguno de los archivos involucrados en el proceso.<br/>
        <br/>
        Una forma de aprender sobre esto, por inmersión, puede ser descargar archivos .deb, descomprimirlos y leer los archivos involucrados.<br/>
        Si bien un archivo .deb puedes descomprimirlo igual que un zip común, lo correcto es hacerlo mediante:
    </p>
        <p align="justify" style="margin-left: 2.5cm"><font color="#990000">
            dpkg -x paquete.deb directorio
        </font> </p>
    </body>
</html>
