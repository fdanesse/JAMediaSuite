<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Instalador Sugar</title>
    <style type="text/css">
        @page { margin-left: 1cm; margin-right: 1cm }
        p { margin-bottom: 0.25cm; color: #000000; line-height: 120% }
        a:link { so-language: zxx }
    </style>
</head>

<body lang="es-UY">

    <p align="left">
        <u><font size="4" color="#000099" style="font-size: 14pt">
            <b>El Instalador Sugar:</b>
        </u></font>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        Un Instalador Sugar es un simple archivo zip que contiene un directorio con toda la aplicación a instalar.<br/>
        <br/>
        <b>Este archivo zip debe nombrarse de la siguiente forma:</b>
    </p>

    <p align="left" style="margin-left: 2.5cm">
        <font color="#006699"><i>NombreAplicación.activity.xo</i></font>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        <b>Por ejemplo, para JAMediaEditor, sería:</b>
    </p>

    <p align="left" style="margin-left: 2.5cm">
        <font color="#006699"><i>JAMediaEditor.activity.xo</i></font>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        Para este ejemplo, cuando JAMediaEditor se instale en sugar, se creará un directorio <font color="#cc0066"><i>JAMediaEditor.activity</i></font> dentro de <font color="#cc0066"><i>/home/olpc/Activities/</i></font> y en el se copiarán todos los archivos y directorios de la aplicación.
    </p>

    <br/>

    <p align="left">
        <u><font size="4" color="#000099" style="font-size: 14pt">
            <b>Crear una Aplicación Sugar:</b>
        </u></font>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        Para crear una aplicación Sugar, debes crear un directorio con el nombre de la aplicación y agregarle <font color="#cc0066"><i>&quot;.activity&quot;</i></font>.<br/>
        <br/>
        Dentro, desarrollas toda tu aplicación, tomando en cuenta que el archivo main de tu proyecto, debe estar en ese directorio y debe contener una clase que herede de <font color="#cc0066"><i>sugar.activity.activity.Activity</i></font><br/>
        <br/>
        <b>Un ejemplo de esta clase principal es:</b>
    </p>

    <p align="left" style="margin-left: 2.5cm">
        <font color="#cc0066">from sugar.activity.activity import Activity</font><br/>
        <br/>
        <font color="#cc0066">class Bichos(Activity):</font><br/>
    </p>

    <p align="left" style="margin-left: 3.75cm">
        <font color="#cc0066">def __init__(self, handle):</font>
    </p>

    <p align="left" style="margin-left: 5cm">
        <font color="#cc0066">Activity.__init__(self, handle, False)</font>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        <b>También dentro de ese directorio, debe haber un archivo </b><font color="#cc0066"><i><span style="font-weight: normal">setup.py</span></i></font> <b>que debe contener lo siguiente:</b>
    </p>

    <p align="left" style="margin-left: 2.5cm">
        <font color="#cc0066">#!/usr/bin/python<br/>
        # -*- coding: utf-8 -*-<br/>
        <br/>
        from sugar.activity import bundlebuilder<br/>
        bundlebuilder.start()</font>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        <b>Además, dentro de ese mismo directorio, debe haber otro llamado </b><font color="#cc0066"><i><span style="font-weight: normal">&quot;activity&quot;</span></i></font><b>, el cual debe contener:</b>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        <ul style="margin-left: 1.25cm">
            <li/>el ícono de la aplicación en formato svg y de 50 x 50 pixeles.
            <li/>un archivo llamado activity.info
        </ul>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        <b>El archivo:</b><font color="#cc0066"><i> activity.info</i></font> <b>es como un:</b><font color="#cc0066"><i> .desktop</i></font> <b>con contenido similar al siguiente:</b></br>
        <i>(ver Ayuda sobre <a href="Instaladores.html">&quot;Instaladores en General&quot;</a>)</i>
    </p>

    <p align="left" style="margin-left: 2.5cm">
        <font color="#cc0066">[Activity]</br>
        name = Bichos</br>
        bundle_id = org.laptop.Bichos</br>
        exec = sugar-activity SugarBichos.Bichos</br>
        icon = Bichos</br>
        activity_version = 1</br>
        show_launcher = yes</font>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        <b>Los campos verdaderamente importantes en este archivo son:</b> <font color="#006699">bundle_id, exec y activity_version</font></b>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        <b>bundle_id:</b>
    </p>

    <p align="left" style="margin-left: 2.5cm">
        Es un identificador único para la aplicación.</br>
        </br>
        En el sitio de descargas de Sugar nunca podrás subir un paquete .xo que contenga en este campo el mismo valor que otra aplicación existente.</br>
        Tampoco podrás subir una actualización de una aplicación que no contenga el mismo identificador que el explicitado en el sitio de descargas para esa aplicación.
    </p>

    <p align="left" style="margin-left: 1.25cm">
        <b>exec:</b>
    </p>

    <p align="left" style="margin-left: 2.5cm">
        Refiere al archivo y clase principal de la aplicación (SugarBichos.Bichos)</br>
        </br>
        Si estableces mal este campo, la aplicación no iniciará luego de instalada.
    </p>

    <p align="left" style="margin-left: 1.25cm">
        <b>activity_version:</b>
    </p>

    <p align="left" style="margin-left: 2.5cm">
        Este campo es importante al momento de descargar e instalar una aplicación en sugar debido a que sugar solo instala versiones más nuevas de una aplicación que ya tiene instalada.
    </p>

    <p align="left" style="margin-left: 1.25cm">
        <b>Resumiendo, la estructura de tu proyecto sugar debe contener:</b>
    </p>

    <p align="left" style="margin-left: 2.5cm; margin-bottom: 0cm">
        <font color="#006699">MiAplicacion.activity/</font>
    </p>
        <p align="left" style="margin-left: 3.75cm; margin-top: 0.1cm; margin-bottom: 0cm">
            <font color="#006699">activity/</font>
        </p>
            <p align="left" style="margin-left: 5cm; margin-top: 0.1cm; margin-bottom: 0cm">
                <font color="#006699">icono.svg</br>
                activity.info</font>
            </p>
        <p align="left" style="margin-left: 3.75cm; margin-top: 0.1cm">
            <font color="#006699">setup.py</br>
            ArchivoPrincipal.py <font color="#111111"><i>(con Clase Principal que herede de sugar.activity.activity.Activity)</i></font>
        </p>

    <p align="left" style="margin-left: 1.25cm">
        <font size="3" style="font-size: 12pt">
        <b>Luego de tener todo esto en orden, debes:</b></font>
        <ul style="margin-left: 1.25cm"><font color="#000000">
            <li/>Establecer los permisos de archivos y directorios en forma correcta.
            <li/>Cada archivo debe tener los permisos 644 y los directorios 755, incluso el directorio principal de la aplicación.
            <li/>Luego comprimes el directorio principal de tu aplicación en un archivo zip.
            <li/>Le cambias la extensión a .xo.
            <li/>Al archivo .xo, le das los permisos 755 y estará listo para subirlo a internet y distribuirlo o instalarlo en sugar.</font>
        </ul>
    </p>

    </br>

    <p align="left">
        <u><font size="4" color="#000099" style="font-size: 14pt">
            <b>Sobre JAMediaEditor:</b>
        </u></font>
    </p>

    <p align="left" style="margin-left: 1.25cm">
        JAMediaEditor realiza todo este proceso en forma automática pero el resultado depende de que tu establezcas correctamente el main del proyecto y toda la información del archivo activity.info.</br>
        <br>
        JAMediaEditor solo intenta guiarte en cada instalador creando plantillas de los archivos necesarios, pero nunca modificará los archivos de tu proyecto.
    </p>

    </body>
</html>
